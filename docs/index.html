<html><head><link href="css/hybrid.min.css" rel="stylesheet" /><link href="css/slideshow.css" rel="stylesheet" /></head><body><div class="slide"><h1>Pancakes with<br />a side of nonsense</h1><h2 class="byline">Logan Campbell</h2></div><div class="slide"><img height="90%" src="images/01-diner.jpg" /></div><div class="slide"><img height="90%" src="images/02-pancakes.jpg" /></div><div class="slide"><img height="90%" src="images/03-drip-coffee.jpg" /></div><div class="slide"><pre><code class="language-typescript show">type food = "pancakes";
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">type beverage
</code></pre><pre><code class="language-typescript fade">    = "tea"
</code></pre><pre><code class="language-typescript fade">    | "batch_brew";
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">type drink =
</code></pre><pre><code class="language-typescript fade">    {beverage: beverage,
</code></pre><pre><code class="language-typescript fade">     milk:     boolean,
</code></pre><pre><code class="language-typescript fade">     sugar:    boolean};
</code></pre></div><div class="slide"><pre><code class="language-typescript fade">type food = "pancakes";
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript show">type beverage
</code></pre><pre><code class="language-typescript show">    = "tea"
</code></pre><pre><code class="language-typescript show">    | "batch_brew";
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">type drink =
</code></pre><pre><code class="language-typescript fade">    {beverage: beverage,
</code></pre><pre><code class="language-typescript fade">     milk:     boolean,
</code></pre><pre><code class="language-typescript fade">     sugar:    boolean};
</code></pre></div><div class="slide"><pre><code class="language-typescript fade">type food = "pancakes";
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">type beverage
</code></pre><pre><code class="language-typescript fade">    = "tea"
</code></pre><pre><code class="language-typescript fade">    | "batch_brew";
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript show">type drink =
</code></pre><pre><code class="language-typescript show">    {beverage: beverage,
</code></pre><pre><code class="language-typescript show">     milk:     boolean,
</code></pre><pre><code class="language-typescript show">     sugar:    boolean};
</code></pre></div><div class="slide"><pre><code class="language-typescript">type food = "pancakes";

type beverage
    = "tea"
    | "batch_brew";

type drink =
    {beverage: beverage,
     milk:     boolean,
     sugar:    boolean};
</code></pre></div><div class="slide"><img height="90%" src="images/06-tea-batch-brew-options.png" /></div><div class="slide"><img height="90%" src="images/04-espresso-machine.jpg" /></div><div class="slide"><pre><code class="language-typescript fade">type food = "pancakes";
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">type beverage
</code></pre><pre><code class="language-typescript fade">    = "tea"
</code></pre><pre><code class="language-typescript show">    | "espresso"
</code></pre><pre><code class="language-typescript show">    | "cappuchino"
</code></pre><pre><code class="language-typescript fade">    | "batch_brew";
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">type drink =
</code></pre><pre><code class="language-typescript fade">    {beverage: beverage,
</code></pre><pre><code class="language-typescript fade">     milk:     boolean,
</code></pre><pre><code class="language-typescript fade">     sugar:    boolean};
</code></pre></div><div class="slide"><img height="90%" src="images/07-espresso-options.png" /></div><div class="slide"><pre><code class="language-typescript">var pancakes_and_nonsense =
    ["pancakes",

     {beverage: "cappuchino",
      milk:     false,
      sugar:    false}];
</code></pre></div><div class="slide"><pre><code class="language-typescript fade">var pancakes_and_nonsense =
</code></pre><pre><code class="language-typescript fade">    ["pancakes",
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript show">     {beverage: "cappuchino",
</code></pre><pre><code class="language-typescript show">      milk:     false,
</code></pre><pre><code class="language-typescript fade">      sugar:    false}];
</code></pre></div><div class="slide"><img height="90%" src="images/08-espresso-options-invalid.png" /></div><div class="slide"><h1>16 Options</h1><h2 class="byline">12.5% Nonsense</h2></div><div class="slide"><pre><code class="language-typescript">function makeCoffee(beverage: beverage,
                    milk:     boolean,
                    sugar:    boolean) {

    if ( beverage == "cappuchino" && !milk ) {
        throw "Nonsense";
    } else {
        return {beverage: beverage,
                milk:     milk,
                sugar:    sugar};
    }

}
</code></pre></div><div class="slide"><pre><code class="language-typescript fade">function makeCoffee(beverage: beverage,
</code></pre><pre><code class="language-typescript fade">                    milk:     boolean,
</code></pre><pre><code class="language-typescript fade">                    sugar:    boolean) {
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript show">    if ( beverage == "cappuchino" && !milk ) {
</code></pre><pre><code class="language-typescript fade">        throw "Nonsense";
</code></pre><pre><code class="language-typescript fade">    } else {
</code></pre><pre><code class="language-typescript fade">        return {beverage: beverage,
</code></pre><pre><code class="language-typescript fade">                milk:     milk,
</code></pre><pre><code class="language-typescript fade">                sugar:    sugar};
</code></pre><pre><code class="language-typescript fade">    }
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">}
</code></pre></div><div class="slide"><img height="90%" src="images/05-make-coffee-constructor.png" /></div><div class="slide"><pre><code class="language-ruby">Drink.new(beverage: "cappuchino",
          sugar:    true,
          milk:     false)
</code></pre></div><div class="slide"><pre><code class="language-ruby">class Drink
  def initialize(beverage: , sugar:, milk: )
    if beverage == :cappuchino && !milk
      raise "Nonsense"
    end

    @beverage = beverage
    @sugar    = sugar
    @milk     = milk
  end
end
</code></pre></div><div class="slide"><pre><code class="language-typescript">type food = "pancakes";

type drink
    = {beverage: "batch_brew", milk: boolean, sugar: boolean}
    | {beverage: "espresso",   milk: boolean, sugar: boolean}
    | {beverage: "cappuchino",                sugar: boolean}
    | {beverage: "tea",        milk: boolean, sugar: boolean};
</code></pre></div><div class="slide"><pre><code class="language-typescript fade">type food = "pancakes";
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">type drink
</code></pre><pre><code class="language-typescript fade">    = {beverage: "batch_brew", milk: boolean, sugar: boolean}
</code></pre><pre><code class="language-typescript fade">    | {beverage: "espresso",   milk: boolean, sugar: boolean}
</code></pre><pre><code class="language-typescript show">    | {beverage: "cappuchino",                sugar: boolean}
</code></pre><pre><code class="language-typescript fade">    | {beverage: "tea",        milk: boolean, sugar: boolean};
</code></pre></div><div class="slide"><img height="90%" src="images/09-nonsense-removed.png" /></div><div class="slide"><h1>14 Options</h1><h2 class="byline">No nonsense</h2></div><div class="slide"><pre><code class="language-ruby">class Drink
  def initialize(beverage: , sugar:, milk: )
    if beverage == :cappuchino && !milk
      raise "Nonsense"
    end

    @beverage = beverage
    @sugar    = sugar
    @milk     = milk
  end
end
</code></pre></div><div class="slide"><pre><code class="language-ruby">class Cappuchino
  def initialize(sugar: )
    @sugar = sugar
  end
end
</code></pre></div><div class="slide"><h1>Sloppy types</h1><pre><code class="language-typescript show">var user_role: string;
</code></pre><pre><code class="language-typescript show">
</code></pre><pre><code class="language-typescript show">user_role = "admin";                // This is fine
</code></pre><pre><code class="language-typescript show">user_role = "milk_free_cappuccino"; // This is nonsense
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">var user_role: "end_user" | "agent" | "admin";
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">user_role = "admin";                // This is fine
</code></pre><pre><code class="language-typescript fade">user_role = "milk_free_cappuccino"; // This won't compile
</code></pre></div><div class="slide"><h1>Sloppy types</h1><pre><code class="language-typescript fade">var user_role: string;
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">user_role = "admin";                // This is fine
</code></pre><pre><code class="language-typescript fade">user_role = "milk_free_cappuccino"; // This is nonsense
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript show">var user_role: "end_user" | "agent" | "admin";
</code></pre><pre><code class="language-typescript show">
</code></pre><pre><code class="language-typescript show">user_role = "admin";                // This is fine
</code></pre><pre><code class="language-typescript show">user_role = "milk_free_cappuccino"; // This won't compile
</code></pre></div><div class="slide"><pre><code class="language-typescript show">var years_of_experience: number;
</code></pre><pre><code class="language-typescript show">
</code></pre><pre><code class="language-typescript show">years_of_experience = 5;    // This is fine
</code></pre><pre><code class="language-typescript show">years_of_experience = 1.5;  // Seems reasonable
</code></pre><pre><code class="language-typescript show">
</code></pre><pre><code class="language-typescript show">years_of_experience = 1000; // Nonsense
</code></pre><pre><code class="language-typescript show">years_of_experience = -42;  // Negative nonsense
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">var years_of_experience:
</code></pre><pre><code class="language-typescript fade">    0 | 1 | 2 | 3 | 4 | 5 |
</code></pre><pre><code class="language-typescript fade">    6 | 7 | 8 | 9 | "10+";
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">years_of_experience = 5;    // This is fine
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">years_of_experience = 1.5;  // Nonsense
</code></pre><pre><code class="language-typescript fade">years_of_experience = 1000; // won't
</code></pre><pre><code class="language-typescript fade">years_of_experience = -42;  // compile
</code></pre></div><div class="slide"><pre><code class="language-typescript fade">var years_of_experience: number;
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">years_of_experience = 5;    // This is fine
</code></pre><pre><code class="language-typescript fade">years_of_experience = 1.5;  // Seems reasonable
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">years_of_experience = 1000; // Nonsense
</code></pre><pre><code class="language-typescript fade">years_of_experience = -42;  // Negative nonsense
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript show">var years_of_experience:
</code></pre><pre><code class="language-typescript show">    0 | 1 | 2 | 3 | 4 | 5 |
</code></pre><pre><code class="language-typescript show">    6 | 7 | 8 | 9 | "10+";
</code></pre><pre><code class="language-typescript show">
</code></pre><pre><code class="language-typescript show">years_of_experience = 5;    // This is fine
</code></pre><pre><code class="language-typescript show">
</code></pre><pre><code class="language-typescript show">years_of_experience = 1.5;  // Nonsense
</code></pre><pre><code class="language-typescript show">years_of_experience = 1000; // won't
</code></pre><pre><code class="language-typescript show">years_of_experience = -42;  // compile
</code></pre></div><div class="slide"><pre><code class="language-typescript show">var record: {id:         number,
</code></pre><pre><code class="language-typescript show">             deleted:    Date   | null,
</code></pre><pre><code class="language-typescript show">             deleted_by: string | null}
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">// Valid. Not deleted.
</code></pre><pre><code class="language-typescript fade">record = {id:         1,
</code></pre><pre><code class="language-typescript fade">          deleted:    null,
</code></pre><pre><code class="language-typescript fade">          deleted_by: null}
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">// Valid. Soft deleted.
</code></pre><pre><code class="language-typescript fade">record = {id:         1,
</code></pre><pre><code class="language-typescript fade">          deleted:    new Date("2022-03-25"),
</code></pre><pre><code class="language-typescript fade">          deleted_by: "Logan"}
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">// Invalid. If it's soft deleted we need both fields set.
</code></pre><pre><code class="language-typescript fade">record = {id:         1,
</code></pre><pre><code class="language-typescript fade">          deleted:    null,
</code></pre><pre><code class="language-typescript fade">          deleted_by: "Logan"}
</code></pre></div><div class="slide"><pre><code class="language-typescript fade">var record: {id:         number,
</code></pre><pre><code class="language-typescript fade">             deleted:    Date   | null,
</code></pre><pre><code class="language-typescript fade">             deleted_by: string | null}
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript show">// Valid. Not deleted.
</code></pre><pre><code class="language-typescript show">record = {id:         1,
</code></pre><pre><code class="language-typescript show">          deleted:    null,
</code></pre><pre><code class="language-typescript show">          deleted_by: null}
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">// Valid. Soft deleted.
</code></pre><pre><code class="language-typescript fade">record = {id:         1,
</code></pre><pre><code class="language-typescript fade">          deleted:    new Date("2022-03-25"),
</code></pre><pre><code class="language-typescript fade">          deleted_by: "Logan"}
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">// Invalid. If it's soft deleted we need both fields set.
</code></pre><pre><code class="language-typescript fade">record = {id:         1,
</code></pre><pre><code class="language-typescript fade">          deleted:    null,
</code></pre><pre><code class="language-typescript fade">          deleted_by: "Logan"}
</code></pre></div><div class="slide"><pre><code class="language-typescript fade">var record: {id:         number,
</code></pre><pre><code class="language-typescript fade">             deleted:    Date   | null,
</code></pre><pre><code class="language-typescript fade">             deleted_by: string | null}
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">// Valid. Not deleted.
</code></pre><pre><code class="language-typescript fade">record = {id:         1,
</code></pre><pre><code class="language-typescript fade">          deleted:    null,
</code></pre><pre><code class="language-typescript fade">          deleted_by: null}
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript show">// Valid. Soft deleted.
</code></pre><pre><code class="language-typescript show">record = {id:         1,
</code></pre><pre><code class="language-typescript show">          deleted:    new Date("2022-03-25"),
</code></pre><pre><code class="language-typescript show">          deleted_by: "Logan"}
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">// Invalid. If it's soft deleted we need both fields set.
</code></pre><pre><code class="language-typescript fade">record = {id:         1,
</code></pre><pre><code class="language-typescript fade">          deleted:    null,
</code></pre><pre><code class="language-typescript fade">          deleted_by: "Logan"}
</code></pre></div><div class="slide"><pre><code class="language-typescript fade">var record: {id:         number,
</code></pre><pre><code class="language-typescript fade">             deleted:    Date   | null,
</code></pre><pre><code class="language-typescript fade">             deleted_by: string | null}
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">// Valid. Not deleted.
</code></pre><pre><code class="language-typescript fade">record = {id:         1,
</code></pre><pre><code class="language-typescript fade">          deleted:    null,
</code></pre><pre><code class="language-typescript fade">          deleted_by: null}
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">// Valid. Soft deleted.
</code></pre><pre><code class="language-typescript fade">record = {id:         1,
</code></pre><pre><code class="language-typescript fade">          deleted:    new Date("2022-03-25"),
</code></pre><pre><code class="language-typescript fade">          deleted_by: "Logan"}
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript show">// Invalid. If it's soft deleted we need both fields set.
</code></pre><pre><code class="language-typescript show">record = {id:         1,
</code></pre><pre><code class="language-typescript show">          deleted:    null,
</code></pre><pre><code class="language-typescript show">          deleted_by: "Logan"}
</code></pre></div><div class="slide"><pre><code class="language-typescript show">type deletion = {deleted:    Date,
</code></pre><pre><code class="language-typescript show">                 deleted_by: string};
</code></pre><pre><code class="language-typescript show">
</code></pre><pre><code class="language-typescript show">var record: {id: number, deletion: deletion | null}
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">// Valid. Not deleted.
</code></pre><pre><code class="language-typescript fade">record = {id: 1, deletion: null}
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">// Valid. Soft deleted.
</code></pre><pre><code class="language-typescript fade">record = {id: 1,
</code></pre><pre><code class="language-typescript fade">          deletion: {deleted:    new Date("2022-03-25"),
</code></pre><pre><code class="language-typescript fade">                     deleted_by: "Logan"}}
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">// Invalid and will be picked up by type checker
</code></pre><pre><code class="language-typescript fade">record = {id: 1,
</code></pre><pre><code class="language-typescript fade">          deletion: {deleted:    null
</code></pre><pre><code class="language-typescript fade">                     deleted_by: "Logan"}}
</code></pre></div><div class="slide"><pre><code class="language-typescript fade">type deletion = {deleted:    Date,
</code></pre><pre><code class="language-typescript fade">                 deleted_by: string};
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">var record: {id: number, deletion: deletion | null}
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript show">// Valid. Not deleted.
</code></pre><pre><code class="language-typescript show">record = {id: 1, deletion: null}
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">// Valid. Soft deleted.
</code></pre><pre><code class="language-typescript fade">record = {id: 1,
</code></pre><pre><code class="language-typescript fade">          deletion: {deleted:    new Date("2022-03-25"),
</code></pre><pre><code class="language-typescript fade">                     deleted_by: "Logan"}}
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">// Invalid and will be picked up by type checker
</code></pre><pre><code class="language-typescript fade">record = {id: 1,
</code></pre><pre><code class="language-typescript fade">          deletion: {deleted:    null
</code></pre><pre><code class="language-typescript fade">                     deleted_by: "Logan"}}
</code></pre></div><div class="slide"><pre><code class="language-typescript fade">type deletion = {deleted:    Date,
</code></pre><pre><code class="language-typescript fade">                 deleted_by: string};
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">var record: {id: number, deletion: deletion | null}
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">// Valid. Not deleted.
</code></pre><pre><code class="language-typescript fade">record = {id: 1, deletion: null}
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript show">// Valid. Soft deleted.
</code></pre><pre><code class="language-typescript show">record = {id: 1,
</code></pre><pre><code class="language-typescript show">          deletion: {deleted:    new Date("2022-03-25"),
</code></pre><pre><code class="language-typescript show">                     deleted_by: "Logan"}}
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">// Invalid and will be picked up by type checker
</code></pre><pre><code class="language-typescript fade">record = {id: 1,
</code></pre><pre><code class="language-typescript fade">          deletion: {deleted:    null
</code></pre><pre><code class="language-typescript fade">                     deleted_by: "Logan"}}
</code></pre></div><div class="slide"><pre><code class="language-typescript fade">type deletion = {deleted:    Date,
</code></pre><pre><code class="language-typescript fade">                 deleted_by: string};
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">var record: {id: number, deletion: deletion | null}
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">// Valid. Not deleted.
</code></pre><pre><code class="language-typescript fade">record = {id: 1, deletion: null}
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript fade">// Valid. Soft deleted.
</code></pre><pre><code class="language-typescript fade">record = {id: 1,
</code></pre><pre><code class="language-typescript fade">          deletion: {deleted:    new Date("2022-03-25"),
</code></pre><pre><code class="language-typescript fade">                     deleted_by: "Logan"}}
</code></pre><pre><code class="language-typescript fade">
</code></pre><pre><code class="language-typescript show">// Invalid and will be picked up by type checker
</code></pre><pre><code class="language-typescript show">record = {id: 1,
</code></pre><pre><code class="language-typescript show">          deletion: {deleted:    null
</code></pre><pre><code class="language-typescript show">                     deleted_by: "Logan"}}
</code></pre></div><div class="slide"><pre><code class="language-typescript">var parcel: {id:                     number,
             product_id:             number,
             shipped:                Date,
             delivered:              Date,
             lost_during_delivery:   boolean,
             dead_on_arrival_return: boolean,
             change_of_mind_return:  boolean
             returned:               Date};

</code></pre></div><div class="slide"><pre><code class="language-typescript">type delivery_status
    = {type: "preparing"}
    | {type: "in_transit",
       shipped: Date}
    | {type: "delivered",
       shipped: Date, delivered: Date}
    | {type: "lost_during_delivery",
       shipped: Date}
    | {type: "dead_on_arrival_return",
       shipped: Date, delivered: Date, returned: Date}
    | {type: "change_of_mind_return",
       shipped: Date, delivered: Date, returned: Date};

var parcel: {id:              number,
             product_id:      number,
             delivery_status: delivery_status};
</code></pre></div><div class="slide"><h1>Data types are<br />countable</h1></div><div class="slide"><h1>Code complexity is<br />measurable</h1></div><div class="slide"><h1>Simple data means<br />simple code</h1></div><div class="slide"><h1>Simple data means<br />less bugs</h1></div><script src="js/highlight.min.js"></script><script>hljs.highlightAll();</script><script src="js/slideshow.js"></script></body></html>